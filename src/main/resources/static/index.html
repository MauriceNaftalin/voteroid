<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="/main.css">
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@stomp/stompjs@7.0.0/bundles/stomp.umd.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="iframeStompManager.js"></script>

</head>
<body>
<!-- bar chart -->
<svg width="250" height="250"></svg>
<!-- diagnostic output from scripts -->
<label style="width: 100px;" id="consoleLog">consoleOutput</label>
<!--https://stackoverflow.com/a/15069289-->
<script src="d3manipulation.js"></script>
<script>
    const params = new URLSearchParams(window.location.search);
    const question = params.get('question');
    consoleOutput(question);
    // consoleOutput(`ws://` + window.location.host + `/gs-guide-websocket`);

    document.addEventListener("DOMContentLoaded", function() {
        stompClient.activate();
    });

    document.addEventListener("DOMContentLoaded", function() {
        const params = new URLSearchParams(window.location.search);
        const question = params.get('question');
        fetch('http://' + window.location.host + '/' + question + '/getColumnLabels', {
            method: 'GET',
            headers: {'Content-Type': 'application/json'}
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => setColumnLabels(data))
            .catch(error => {
                console.error('Fetch error:', error);
            });
    });

</script>
</body>
</html>